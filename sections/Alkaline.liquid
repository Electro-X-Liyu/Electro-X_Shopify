{% comment %}
  文件名: templates/product.liquid 或 sections/featured-product.liquid
  功能: 显示产品信息，隐藏名称和价格，可调节图片大小
{% endcomment %}

<div class="featured-product-section" data-section-id="{{ section.id }}" data-section-type="featured-product">
  <div class="page-width">
    <div class="section-header text-center">
      <h2 class="h1">{{ section.settings.title | default: product.title }}</h2>
      {% if section.settings.subtitle != blank %}
        <p class="subtitle">{{ section.settings.subtitle }}</p>
      {% endif %}
    </div>
    
    <div class="featured-product">
      <div class="product-image-container" style="--image-size: {{ section.settings.image_size }}px;">
        {% comment %} 产品图片展示 {% endcomment %}
        <div class="product-images">
          {% if product.images.size > 0 %}
            <div class="product-main-image">
              <img src="{{ product.featured_image | img_url: 'master' }}" 
                   alt="{{ product.featured_image.alt | escape }}" 
                   class="product-image"
                   loading="lazy">
            </div>
            
            {% if product.images.size > 1 %}
              <div class="product-thumbnails">
                {% for image in product.images %}
                  <div class="thumbnail-item">
                    <img src="{{ image | img_url: '100x' }}" 
                         alt="{{ image.alt | escape }}"
                         data-full-size="{{ image | img_url: 'master' }}"
                         loading="lazy">
                  </div>
                {% endfor %}
              </div>
            {% endif %}
          {% else %}
            <div class="product-image-placeholder">
              {{ 'product-1' | placeholder_svg_tag: 'placeholder-svg' }}
            </div>
          {% endif %}
        </div>
      </div>
      
      <div class="product-info">
        {% comment %} 产品描述区域 {% endcomment %}
        <div class="product-description rte">
          {{ product.description }}
        </div>
        
        {% comment %} 购买表单 {% endcomment %}
        <div class="product-form">
          {% form 'product', product, class: 'product-form' %}
            {% if product.variants.size > 1 %}
              <div class="product-options">
                {% for option in product.options_with_values %}
                  <div class="selector-wrapper">
                    <label for="Option-{{ section.id }}-{{ forloop.index0 }}">
                      {{ option.name }}
                    </label>
                    <select id="Option-{{ section.id }}-{{ forloop.index0 }}"
                            class="single-option-selector"
                            data-index="option{{ forloop.index }}">
                      {% for value in option.values %}
                        <option value="{{ value | escape }}"{% if option.selected_value == value %} selected="selected"{% endif %}>
                          {{ value }}
                        </option>
                      {% endfor %}
                    </select>
                  </div>
                {% endfor %}
              </div>
            {% endif %}
            
            <div class="product-quantity">
              <label for="Quantity-{{ section.id }}">{{ 'products.product.quantity' | t }}</label>
              <input type="number" id="Quantity-{{ section.id }}"
                     name="quantity" value="1" min="1" pattern="[0-9]*">
            </div>
            
            <button type="submit" name="add"
                    class="btn add-to-cart"
                    {% unless product.available %}disabled="disabled"{% endunless %}>
              <span>
                {% if product.available %}
                  {{ 'products.product.add_to_cart' | t }}
                {% else %}
                  {{ 'products.product.sold_out' | t }}
                {% endif %}
              </span>
            </button>
          {% endform %}
        </div>
      </div>
    </div>
  </div>
</div>

{% comment %} 样式部分 {% endcomment %}
<style>
  .featured-product-section {
    background: {{ section.settings.background }};
    padding: 40px 0;
    margin: 40px 0;
  }
  
  .section-header {
    margin-bottom: 30px;
  }
  
  .section-header h2 {
    font-size: {{ section.settings.title_size }}px;
    color: {{ section.settings.title_color }};
    margin-bottom: 10px;
  }
  
  .section-header .subtitle {
    font-size: {{ section.settings.subtitle_size }}px;
    color: {{ section.settings.subtitle_color }};
  }
  
  .featured-product {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
    gap: 40px;
  }
  
  .product-image-container {
    flex: 1 1 50%;
    min-width: 300px;
    text-align: center;
  }
  
  .product-image {
    width: 100%;
    max-width: var(--image-size);
    height: auto;
    object-fit: contain;
    transition: transform 0.3s ease;
  }
  
  .product-image:hover {
    transform: scale(1.03);
  }
  
  .product-thumbnails {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 15px;
  }
  
  .thumbnail-item {
    cursor: pointer;
    border: 1px solid #ddd;
    padding: 2px;
  }
  
  .thumbnail-item:hover {
    border-color: #999;
  }
  
  .thumbnail-item img {
    width: 50px;
    height: 50px;
    object-fit: cover;
  }
  
  .product-info {
    flex: 1 1 40%;
    min-width: 300px;
  }
  
  /* 隐藏产品标题和价格 */
  .product-title, .product-price {
    display: none !important;
  }
  
  .product-description {
    margin-bottom: 20px;
    line-height: 1.6;
    color: {{ section.settings.text_color }};
  }
  
  .product-options {
    margin-bottom: 15px;
  }
  
  .selector-wrapper {
    margin-bottom: 10px;
  }
  
  .product-quantity {
    margin-bottom: 15px;
  }
  
  .product-quantity input {
    width: 60px;
    padding: 8px;
  }
  
  .btn.add-to-cart {
    background-color: {{ section.settings.button_color }};
    color: {{ section.settings.button_text_color }};
    padding: 12px 24px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1rem;
    transition: background-color 0.3s;
    width: 100%;
  }
  
  .btn.add-to-cart:hover {
    background-color: {{ section.settings.button_hover_color }};
  }
  
  .btn.add-to-cart[disabled] {
    background-color: #ccc;
    cursor: not-allowed;
  }
  
  @media (max-width: 768px) {
    .featured-product {
      flex-direction: column;
    }
    
    .product-image-container, 
    .product-info {
      flex: 1 1 100%;
    }
    
    .section-header h2 {
      font-size: {{ section.settings.title_size_mobile }}px;
    }
    
    .section-header .subtitle {
      font-size: {{ section.settings.subtitle_size_mobile }}px;
    }
  }
</style>

{% comment %} 主题设置Schema {% endcomment %}
{% schema %}
{
  "name": "Featured Product",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Featured Product"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subheading"
    },
    {
      "type": "range",
      "id": "image_size",
      "label": "Product image size",
      "min": 300,
      "max": 800,
      "step": 50,
      "unit": "px",
      "default": 600
    },
    {
      "type": "color",
      "id": "background",
      "label": "Background color",
      "default": "#f8f8f8"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title color",
      "default": "#333333"
    },
    {
      "type": "range",
      "id": "title_size",
      "label": "Title size",
      "min": 20,
      "max": 60,
      "step": 1,
      "unit": "px",
      "default": 36
    },
    {
      "type": "range",
      "id": "title_size_mobile",
      "label": "Title size (mobile)",
      "min": 16,
      "max": 40,
      "step": 1,
      "unit": "px",
      "default": 28
    },
    {
      "type": "color",
      "id": "subtitle_color",
      "label": "Subtitle color",
      "default": "#666666"
    },
    {
      "type": "range",
      "id": "subtitle_size",
      "label": "Subtitle size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 18
    },
    {
      "type": "range",
      "id": "subtitle_size_mobile",
      "label": "Subtitle size (mobile)",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "default": 16
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Button color",
      "default": "#3a7bd5"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button text color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_hover_color",
      "label": "Button hover color",
      "default": "#2c5fb3"
    }
  ],
  "presets": [
    {
      "name": "Featured Product",
      "category": "Product"
    }
  ]
}
{% endschema %}