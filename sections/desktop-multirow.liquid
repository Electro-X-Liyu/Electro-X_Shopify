{{ 'component-image-with-text.css' | asset_url | stylesheet_tag }}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }

  /* Mobile hiding */
  @media screen and (max-width: 749px) {
    .desktop-multirow {
      display: none !important;
    }
  }

  /* Full width modifications */
  .desktop-multirow .multirow__inner {
    max-width: 100% !important;
    padding-left: 0 !important;
    padding-right: 0 !important;    
    row-gap: 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
  }

  .image-with-text__grid {
    max-width: 100% !important;
  }

  .desktop-multirow .image-with-text__media {
    margin: 0 !important;
    padding: 0 !important;
  }

  /* 可选：图片拉伸 */
  .image-with-text__media img {
    width: 100% !important;
    height: auto;
  }

  /* 取消副标题全大写和letter-spacing */
  .image-with-text__text--caption {
    text-transform: none !important;
    letter-spacing: normal !important;
  }

  /* 按钮样式 - 增加特异性 */
  .desktop-multirow .image-with-text__content .button,
  .desktop-multirow .image-with-text__content a.button {
    min-height: calc(2.5rem + var(--buttons-border-width) * 2) !important;
    padding-left: 20px !important;
    padding-right: 20px !important;
    border-radius: 10px !important;
    margin-top: 80px !important;
  }

  /* 内容区域padding */
  .image-with-text__content.image-with-text__content--middle.image-with-text__content--desktop-left.image-with-text__content--mobile-left.image-with-text__content--large.content-container.background-transparent {
    padding: 120px !important;
  }

  /* 自定义文字样式 */
  {%- for block in section.blocks -%}
    /* 标题样式 */
    #block-{{ block.id }} .image-with-text__heading {
      {%- if block.settings.heading_font_weight != 'default' -%}
        font-weight: {{ block.settings.heading_font_weight }} !important;
      {%- endif -%}
      {%- if block.settings.heading_font_size != 'default' -%}
        font-size: {{ block.settings.heading_font_size }}px !important;
      {%- endif -%}
      {%- if block.settings.heading_color != 'rgba(0,0,0,0)' -%}
        color: {{ block.settings.heading_color }} !important;
      {%- endif -%}
    }

    /* 副标题样式 - 与正文样式一致 */
    #block-{{ block.id }} .image-with-text__text--caption {
      {%- if block.settings.caption_font_weight != 'default' -%}
        font-weight: {{ block.settings.caption_font_weight }} !important;
      {%- endif -%}
      {%- if block.settings.caption_font_size != 'default' -%}
        font-size: {{ block.settings.caption_font_size }}px !important;
      {%- endif -%}
      {%- if block.settings.caption_color != 'rgba(0,0,0,0)' -%}
        color: {{ block.settings.caption_color }} !important;
      {%- endif -%}
      margin-top: 70px !important;
      margin-bottom: 20px !important;
    }

    /* 正文样式 */
    #block-{{ block.id }} .image-with-text__text.rte {
      {%- if block.settings.text_font_weight != 'default' -%}
        font-weight: {{ block.settings.text_font_weight }} !important;
      {%- endif -%}
      {%- if block.settings.text_font_size != 'default' -%}
        font-size: {{ block.settings.text_font_size }}px !important;
      {%- endif -%}
      {%- if block.settings.text_color != 'rgba(0,0,0,0)' -%}
        color: {{ block.settings.text_color }} !important;
      {%- endif -%}
    }

    /* 按钮样式 - 增加特异性 */
    #block-{{ block.id }} .image-with-text__content .button,
    #block-{{ block.id }} .image-with-text__content a.button {
      {%- if block.settings.button_font_weight != 'default' -%}
        font-weight: {{ block.settings.button_font_weight }} !important;
      {%- endif -%}
      {%- if block.settings.button_font_size != 'default' -%}
        font-size: {{ block.settings.button_font_size }}px !important;
      {%- endif -%}
      {%- if block.settings.button_text_color != 'rgba(0,0,0,0)' -%}
        color: {{ block.settings.button_text_color }} !important;
      {%- endif -%}
      {%- if block.settings.button_bg_color != 'rgba(0,0,0,0)' -%}
        background-color: {{ block.settings.button_bg_color }} !important;
      {%- endif -%}
      {%- if block.settings.button_border_color != 'rgba(0,0,0,0)' -%}
        border-color: {{ block.settings.button_border_color }} !important;
      {%- endif -%}
      border-radius: 10px !important;
    }
  {%- endfor -%}
{%- endstyle -%}

{%- liquid
  if section.settings.image_layout contains 'right'
    assign odd_class = ' image-with-text__grid--reverse'
  else
    assign even_class = ' image-with-text__grid--reverse'
  endif

  if section.settings.row_color_scheme == section.settings.section_color_scheme
    assign no_content_background = true
  endif

  if settings.text_boxes_shadow_opacity == 0 and settings.text_boxes_border_thickness == 0 or settings.text_boxes_border_opacity == 0
    assign no_content_styles = true
  endif

  if settings.text_boxes_border_thickness > 0 and settings.text_boxes_border_opacity > 0 and settings.media_border_thickness > 0 and settings.media_border_opacity > 0
    assign borders_class = ' collapse-borders'
  endif

  if no_content_background and no_content_styles
    assign padding_class = ' collapse-padding'
  endif

  unless no_content_background and no_content_styles
    assign corners_class = ' collapse-corners'
  endunless
-%}

<div class="desktop-multirow multirow section-{{ section.id }}-padding gradient color-{{ section.settings.section_color_scheme }}">
  <div class="multirow__inner">
    {%- for block in section.blocks -%}
      <div
        id="block-{{ block.id }}"
        class="image-with-text isolate{{ borders_class }}{{ corners_class }}{{ padding_class }}{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
        {{ block.shopify_attributes }}
      >
        <div class="image-with-text__grid grid grid--gapless grid--1-col grid--{% if section.settings.desktop_image_width == 'medium' %}2-col-tablet{% else %}3-col-tablet{% endif %}{% if section.settings.image_layout contains 'alternate' %}{% cycle odd_class, even_class %}{% else %}{{ odd_class }}{% endif %}" style="margin-top: 1px !important; margin-bottom: 1px !important;">
          <div class="image-with-text__media-item image-with-text__media-item--{{ section.settings.desktop_image_width }} image-with-text__media-item--{{ section.settings.desktop_content_position }} grid__item">
            <div
              class="image-with-text__media image-with-text__media--{{ section.settings.image_height }} gradient color-{{ section.settings.row_color_scheme }} global-media-settings{% if block.settings.image != blank %} media{% else %} image-with-text__media--placeholder placeholder{% endif %}"
              {% if section.settings.image_height == 'adapt' and block.settings.image != blank %}
                style="padding-bottom: {{ 1 | divided_by: block.settings.image.aspect_ratio | times: 100 }}%;"
              {% endif %}
            >
              {%- if block.settings.image != blank -%}
                {%- capture sizes -%}
                  (min-width: {{ settings.page_width }}px) 50vw,
                  (min-width: 750px) 50vw, calc(100vw - 30px)
                {%- endcapture -%}
                {{
                  block.settings.image
                  | image_url: width: 1500
                  | image_tag: sizes: sizes, widths: '165, 360, 535, 750, 1070, 1500'
                }}
              {%- else -%}
                {{ 'detailed-apparel-1' | placeholder_svg_tag: 'placeholder-svg' }}
              {%- endif -%}
            </div>
          </div>
          <div class="image-with-text__text-item grid__item">
            <div class="image-with-text__content image-with-text__content--{{ section.settings.desktop_content_position }} image-with-text__content--desktop-{{ section.settings.desktop_content_alignment }} image-with-text__content--mobile-{{ section.settings.mobile_content_alignment }} image-with-text__content--{{ section.settings.image_height }} content-container{% unless no_content_background and no_content_styles %} gradient color-{{ section.settings.row_color_scheme }}{% else %} background-transparent{% endunless %}">
              {%- if block.settings.heading -%}
                <h2 class="image-with-text__heading {{ section.settings.heading_size }} rte">
                  {{ block.settings.heading }}
                </h2>
              {%- endif -%}
              {%- if block.settings.caption -%}
                <p class="image-with-text__text image-with-text__text--caption">
                  {{ block.settings.caption | escape }}
                </p>
              {%- endif -%}
              {%- if block.settings.text -%}
                <div class="image-with-text__text rte {{ section.settings.text_style }}">{{ block.settings.text }}</div>
              {%- endif -%}
              {%- if block.settings.button_label != blank -%}
                <a
                  {% if block.settings.button_link == blank %}
                    role="link" aria-disabled="true"
                  {% else %}
                    href="{{ block.settings.button_link }}"
                  {% endif %}
                  class="button button--{{ section.settings.button_style }}"
                  style="border-radius: 10px !important; min-height: calc(2.5rem + var(--buttons-border-width) * 2) !important; padding-left: 20px !important; padding-right: 20px !important; margin-top: 80px !important;"
                >
                  {{ block.settings.button_label | escape }}
                </a>
              {%- endif -%}
            </div>
          </div>
        </div>
      </div>
    {%- endfor -%}
  </div>
</div>